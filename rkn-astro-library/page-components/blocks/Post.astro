---
import { markedHelper, strapiAsset } from '../util.js'

const props = Astro.props
console.log(props);
const { title, one_liner, date, providers, featured_image } =
  props?.post?.data?.attributes ?? props?.post?.attributes ?? props.post;
const { caption } = featured_image
const { url, width, height } =
  featured_image.image.data.attributes.formats.small
---

<article>
  <h2>Post: {title}</h2>
  <p>{providers.data.map((p) => p.attributes.name)}</p>
  <img src={strapiAsset(url)} width={width/2} height={height/2} alt={caption} />
  <div>{date}</div>
  <div set:html={markedHelper(one_liner)} />
</article>

