---
import { BaseLayout } from '@rkn/base-components'
import {
  BlockRenderer,
  Header,
  fetchFilterPopulate,
} from '@rkn/page-components'

const pageData = await fetchFilterPopulate('/api/pages', 'home', [
  'header.headerImage',
  'blocks.image',
  'blocks.cardImage',
  'blocks.gatherings',
  'blocks.gathering',
  'blocks.gathering.featureImage',
  'blocks.gathering.featureImage.image',
  'blocks.message',
  'blocks.message.featureImage',
  'blocks.message.featureImage.image',
  'blocks.message.soundcloudRecording',
  'blocks.message.profiles',
  'blocks.post',
  'blocks.post.profiles',
  'blocks.post.featureImage',
  'blocks.post.featureImage.image',
  'blocks.event',
  'blocks.event.featureImage',
  'blocks.event.featureImage.image',
  'blocks.profiles',
  'blocks.two-column',
  'blocks.backgroundColour',
  'blocks.featureImage',
  'blocks.featureImage.image',
  'blocks.space',
  'blocks.space.featureImage',
  'blocks.space.featureImage.image',
])
const blocks = pageData.data[0].attributes.blocks
const header = pageData.data[0].attributes.header
---

<BaseLayout title="Home">
  <div class="outer">
    <Header {...header} slug="home" />
    <BlockRenderer blocks={blocks} />
  </div>
</BaseLayout>
<style>
  div.outer {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
</style>
