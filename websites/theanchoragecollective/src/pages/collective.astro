---
import AnchorageBaseLayout from '../layouts/AnchorageBaseLayout.astro'
// import { HeroBannerShallow } from "@rkn/page-components";
import LessHeroicBanner from '../components/LessHeroicBanner.astro'
import Grid from '../components/Grid.astro'
import GridItemProvider from '../components/GridItemProvider.astro'
// import { formatDistance, format } from 'date-fns';

const providers = (
  await fetch(`http://127.0.0.1:1337/api/providers`).then((res) => res.json())
).data
// const { attributes: mostRecent } = providers.shift() || {};
//console.log(providers.length)
const title = 'The Collective'
---

<AnchorageBaseLayout title={title}>
  <LessHeroicBanner
    BackgroundImage="/images/whites-beach-1920x560.png"
    HeroText="Our Collective"
    Subtitle="Supervisors, Mentors, Practitioners, Spiritual Directors"
  />

  <Grid heading="Grow With Us" subtitle="- - -" class="layout-1-1-1">
    {
      providers && providers.length > 0
        ? providers.map((provider) => (
            <GridItemProvider itemType="provider" item={provider} />
          ))
        : 'No providers found'
    }
  </Grid>
</AnchorageBaseLayout>

<style>
  @media screen and (min-width: 48em) {
    .head-first {
      /* text-align: center; */
      font-family: Magallanes;
      text-align: end;
      margin-top: 4px;
      margin-bottom: 8px;
    }

    h1 {
      font-weight: 800;
      color: #555;
      margin: 12px 0 4px 0;
    }

    .grid.layout-1-1-1 {
      gap: 1.5vh 4.25vw;
    }
  }
</style>
