---
import AnchorageBaseLayout from "../layouts/AnchorageBaseLayout.astro";
import { HeroBannerShallow } from "@rkn/page-components";
import Grid from "../components/Grid.astro";
import GridItem from "../components/GridItem.astro";
import { formatDistance, format } from 'date-fns';
import PostsMostRecentSummary from "../components/PostsMostRecentSummary.astro";

const posts = (await fetch(`http://127.0.0.1:1337/api/posts`).then(res => res.json())).data
const { attributes: mostRecent } = posts.shift() || {};
console.log(posts.length)
const title = "Blog Articles";
---

<AnchorageBaseLayout title={title}>
    <HeroBannerShallow
        BackgroundImage="/images/HeaderImage.jpg"
        HeroText="Blog."
    />
    <Grid
      heading="More Rings"
      subtitle="Guidance for Advanced Souls"
      class="layout-1-1-1">

    </Grid>

    <PostsMostRecentSummary slug={mostRecent.slug} />

    <Grid
      heading="Recent Articles"
      subtitle="Thoughtful musings from thoughtful people"
      class="layout-1-1-1">
        {posts && posts.length > 0 ? posts.map((post) => <GridItem itemType="post" item={post} />) : 'No posts found'}
    </Grid>



</AnchorageBaseLayout>

<style>

@media screen and (min-width : 48em) {

.head-first {
  /* text-align: center; */
  font-family: Magallanes;
}

h1 {
  font-weight: 800;
  color: #555;
  margin: 12px 0 4px 0;
}

  .grid.layout-1-1-1 {
    gap: 1.5vh 4.25vw;
  }

  .head-first {
    text-align: end;
    margin-top: 4px;
    margin-bottom: 8px;
  }
</style>
