---
import { BaseLayout } from '@rkn/base-components'
import {
  BlockRenderer,
  Header,
  fetchPageData,
  site,
} from '@rkn/page-components'

const pageData = await fetchPageData('/api/pages', {
  filters: {
    slug: {
      $eq: 'home',
    },
    websites: {
      key: {
        $eq: site(),
      },
    },
  },
  populate: [
    'header.header_image',
    'blocks.image',
    'blocks.gatherings',
    'blocks.message',
    'blocks.message.feature_image',
    'blocks.message.feature_image.image',
    'blocks.message.soundcloud_recording',
    'blocks.message.providers',
    'blocks.post',
    'blocks.post.providers',
    'blocks.post.featured_image',
    'blocks.post.featured_image.image',
    'blocks.event',
  ],
})
const blocks = pageData.data[0].attributes.blocks
const header = pageData.data[0].attributes.header
---

<BaseLayout title="Styleguide">
  <div class="outer">
    <Header {...header} />
    <div class="inner">
      <BlockRenderer blocks={blocks} />
    </div>
  </div>
  <style>
    div.outer {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    div.inner {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      max-width: 700px;
    }
  </style>
</BaseLayout>
